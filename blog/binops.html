<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Binary operators in Aya | Aya Prover</title>
    <meta name="description" content="Website for the Aya theorem prover">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/assets/style.CRpG7vFT.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.HMtUnl-A.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.BZtxTXf2.js">
    <link rel="modulepreload" href="/assets/chunks/framework.BV7BAn2o.js">
    <link rel="modulepreload" href="/assets/blog_binops.md.B-64ecLm.lean.js">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.20/dist/katex.min.css" crossorigin="anonymous">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,700;0,900;1,300;1,700&amp;display=swap">
    <link rel="icon" href="/logo.svg">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-73f8b477><!--[--><!--]--><!--[--><span tabindex="-1" data-v-61951b4c></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-61951b4c>Skip to content</a><!--]--><!----><header class="VPNav" data-v-73f8b477 data-v-aa4f0da6><div class="VPNavBar" data-v-aa4f0da6 data-v-02dc0b56><div class="wrapper" data-v-02dc0b56><div class="container" data-v-02dc0b56><div class="title" data-v-02dc0b56><div class="VPNavBarTitle has-sidebar" data-v-02dc0b56 data-v-dc0c25a8><a class="title" href="/" data-v-dc0c25a8><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo.svg" alt data-v-48f77d65><!--]--><span data-v-dc0c25a8>Aya Prover</span><!--[--><!--]--></a></div></div><div class="content" data-v-02dc0b56><div class="content-body" data-v-02dc0b56><!--[--><!--]--><div class="VPNavBarSearch search" data-v-02dc0b56><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-02dc0b56 data-v-c2386e7e><span id="main-nav-aria-label" class="visually-hidden" data-v-c2386e7e> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/guide/" tabindex="0" data-v-c2386e7e data-v-bb3e7266><!--[--><span data-v-bb3e7266>Guide</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/pubs/" tabindex="0" data-v-c2386e7e data-v-bb3e7266><!--[--><span data-v-bb3e7266>Publications</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/blog/" tabindex="0" data-v-c2386e7e data-v-bb3e7266><!--[--><span data-v-bb3e7266>Blog</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-02dc0b56 data-v-35275505><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-35275505 data-v-3fde37d2 data-v-a118f0a1><span class="check" data-v-a118f0a1><span class="icon" data-v-a118f0a1><!--[--><span class="vpi-sun sun" data-v-3fde37d2></span><span class="vpi-moon moon" data-v-3fde37d2></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-02dc0b56 data-v-833c2968 data-v-e5420ae9><!--[--><a class="VPSocialLink no-icon" href="https://github.com/aya-prover" aria-label="github" target="_blank" rel="noopener" data-v-e5420ae9 data-v-41781b53><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-02dc0b56 data-v-03c933f9 data-v-06cf88d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-06cf88d3><span class="vpi-more-horizontal icon" data-v-06cf88d3></span></button><div class="menu" data-v-06cf88d3><div class="VPMenu" data-v-06cf88d3 data-v-cfe561be><!----><!--[--><!--[--><!----><div class="group" data-v-03c933f9><div class="item appearance" data-v-03c933f9><p class="label" data-v-03c933f9>Appearance</p><div class="appearance-action" data-v-03c933f9><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-03c933f9 data-v-3fde37d2 data-v-a118f0a1><span class="check" data-v-a118f0a1><span class="icon" data-v-a118f0a1><!--[--><span class="vpi-sun sun" data-v-3fde37d2></span><span class="vpi-moon moon" data-v-3fde37d2></span><!--]--></span></span></button></div></div></div><div class="group" data-v-03c933f9><div class="item social-links" data-v-03c933f9><div class="VPSocialLinks social-links-list" data-v-03c933f9 data-v-e5420ae9><!--[--><a class="VPSocialLink no-icon" href="https://github.com/aya-prover" aria-label="github" target="_blank" rel="noopener" data-v-e5420ae9 data-v-41781b53><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-02dc0b56 data-v-84c2b7b6><span class="container" data-v-84c2b7b6><span class="top" data-v-84c2b7b6></span><span class="middle" data-v-84c2b7b6></span><span class="bottom" data-v-84c2b7b6></span></span></button></div></div></div></div><div class="divider" data-v-02dc0b56><div class="divider-line" data-v-02dc0b56></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-73f8b477 data-v-21bab63d><div class="container" data-v-21bab63d><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-21bab63d><span class="vpi-align-left menu-icon" data-v-21bab63d></span><span class="menu-text" data-v-21bab63d>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-21bab63d data-v-25b045a1><button data-v-25b045a1>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-73f8b477 data-v-9e61815d><div class="curtain" data-v-9e61815d></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-9e61815d><span class="visually-hidden" id="sidebar-aria-label" data-v-9e61815d> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-da4abe85><section class="VPSidebarItem level-0 has-active" data-v-da4abe85 data-v-740295d9><div class="item" role="button" tabindex="0" data-v-740295d9><div class="indicator" data-v-740295d9></div><h2 class="text" data-v-740295d9>Blog</h2><!----></div><div class="items" data-v-740295d9><!--[--><div class="VPSidebarItem level-1 is-link" data-v-740295d9 data-v-740295d9><div class="item" data-v-740295d9><div class="indicator" data-v-740295d9></div><a class="VPLink link link" href="/blog/jit-compile.html" data-v-740295d9><!--[--><p class="text" data-v-740295d9>JVM JIT HOAS compiler</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-740295d9 data-v-740295d9><div class="item" data-v-740295d9><div class="indicator" data-v-740295d9></div><a class="VPLink link link" href="/blog/tt-in-tt-qiit.html" data-v-740295d9><!--[--><p class="text" data-v-740295d9>TT in TT using QIIT</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-740295d9 data-v-740295d9><div class="item" data-v-740295d9><div class="indicator" data-v-740295d9></div><a class="VPLink link link" href="/blog/extended-pruning.html" data-v-740295d9><!--[--><p class="text" data-v-740295d9>Extended Pruning</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-740295d9 data-v-740295d9><div class="item" data-v-740295d9><div class="indicator" data-v-740295d9></div><a class="VPLink link link" href="/blog/bye-hott.html" data-v-740295d9><!--[--><p class="text" data-v-740295d9>Farewell, Univalence</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-740295d9 data-v-740295d9><div class="item" data-v-740295d9><div class="indicator" data-v-740295d9></div><a class="VPLink link link" href="/blog/ind-prop.html" data-v-740295d9><!--[--><p class="text" data-v-740295d9>Impredicative Props</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-740295d9 data-v-740295d9><div class="item" data-v-740295d9><div class="indicator" data-v-740295d9></div><a class="VPLink link link" href="/blog/class-defeq.html" data-v-740295d9><!--[--><p class="text" data-v-740295d9>Def. projection in classes</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-740295d9 data-v-740295d9><div class="item" data-v-740295d9><div class="indicator" data-v-740295d9></div><a class="VPLink link link" href="/blog/pathcon-elab.html" data-v-740295d9><!--[--><p class="text" data-v-740295d9>Path cons. elaboration</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-740295d9 data-v-740295d9><div class="item" data-v-740295d9><div class="indicator" data-v-740295d9></div><a class="VPLink link link" href="/blog/path-elab.html" data-v-740295d9><!--[--><p class="text" data-v-740295d9>Path type elaboration</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-740295d9 data-v-740295d9><div class="item" data-v-740295d9><div class="indicator" data-v-740295d9></div><a class="VPLink link link" href="/blog/binops.html" data-v-740295d9><!--[--><p class="text" data-v-740295d9>Binary operators</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-740295d9 data-v-740295d9><div class="item" data-v-740295d9><div class="indicator" data-v-740295d9></div><a class="VPLink link link" href="/blog/index-unification.html" data-v-740295d9><!--[--><p class="text" data-v-740295d9>Index unification</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-740295d9 data-v-740295d9><div class="item" data-v-740295d9><div class="indicator" data-v-740295d9></div><a class="VPLink link link" href="/blog/lang-exts.html" data-v-740295d9><!--[--><p class="text" data-v-740295d9>Language extensions?</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-da4abe85><section class="VPSidebarItem level-0" data-v-da4abe85 data-v-740295d9><div class="item" role="button" tabindex="0" data-v-740295d9><div class="indicator" data-v-740295d9></div><h2 class="text" data-v-740295d9>Guide</h2><!----></div><div class="items" data-v-740295d9><!--[--><div class="VPSidebarItem level-1 is-link" data-v-740295d9 data-v-740295d9><div class="item" data-v-740295d9><div class="indicator" data-v-740295d9></div><a class="VPLink link link" href="/guide/" data-v-740295d9><!--[--><p class="text" data-v-740295d9>Get Started</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-740295d9 data-v-740295d9><div class="item" data-v-740295d9><div class="indicator" data-v-740295d9></div><a class="VPLink link link" href="/guide/install.html" data-v-740295d9><!--[--><p class="text" data-v-740295d9>Install</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-740295d9 data-v-740295d9><div class="item" data-v-740295d9><div class="indicator" data-v-740295d9></div><a class="VPLink link link" href="/guide/haskeller-tutorial.html" data-v-740295d9><!--[--><p class="text" data-v-740295d9>Functional Programming</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-740295d9 data-v-740295d9><div class="item" data-v-740295d9><div class="indicator" data-v-740295d9></div><a class="VPLink link link" href="/guide/prover-tutorial.html" data-v-740295d9><!--[--><p class="text" data-v-740295d9>Theorem Proving</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-740295d9 data-v-740295d9><div class="item" data-v-740295d9><div class="indicator" data-v-740295d9></div><a class="VPLink link link" href="/guide/project-tutorial.html" data-v-740295d9><!--[--><p class="text" data-v-740295d9>Aya packages</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-740295d9 data-v-740295d9><div class="item" data-v-740295d9><div class="indicator" data-v-740295d9></div><a class="VPLink link link" href="/guide/vscode-tutorial.html" data-v-740295d9><!--[--><p class="text" data-v-740295d9>VSCode</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-740295d9 data-v-740295d9><div class="item" data-v-740295d9><div class="indicator" data-v-740295d9></div><a class="VPLink link link" href="/guide/readings.html" data-v-740295d9><!--[--><p class="text" data-v-740295d9>Related papers</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-740295d9 data-v-740295d9><div class="item" data-v-740295d9><div class="indicator" data-v-740295d9></div><a class="VPLink link link" href="/guide/fake-literate.html" data-v-740295d9><!--[--><p class="text" data-v-740295d9>Fake literate mode</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-73f8b477 data-v-8a5e8f89><div class="VPDoc has-sidebar has-aside" data-v-8a5e8f89 data-v-f904a75d><!--[--><!--]--><div class="container" data-v-f904a75d><div class="aside" data-v-f904a75d><div class="aside-curtain" data-v-f904a75d></div><div class="aside-container" data-v-f904a75d><div class="aside-content" data-v-f904a75d><div class="VPDocAside" data-v-f904a75d data-v-53b58994><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-53b58994 data-v-927ab180><div class="content" data-v-927ab180><div class="outline-marker" data-v-927ab180></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-927ab180>On this page</div><ul class="VPDocOutlineItem root" data-v-927ab180 data-v-82cfa107><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-53b58994></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-f904a75d><div class="content-container" data-v-f904a75d><!--[--><!--]--><main class="main" data-v-f904a75d><div style="position:relative;" class="vp-doc _blog_binops" data-v-f904a75d><div><h1 id="binary-operators-in-aya" tabindex="-1">Binary operators in Aya <a class="header-anchor" href="#binary-operators-in-aya" aria-label="Permalink to &quot;Binary operators in Aya&quot;">​</a></h1><p>We have designed a binary operator system in Aya which happens to be (we didn&#39;t copy!) very similar to <a href="https://plt.cs.northwestern.edu/pkg-build/doc/enforest/Operator_Precedence_and_Associativity.html" target="_blank" rel="noreferrer">Rhombus</a> (a.k.a. Racket 2) and <a href="https://docs.swift.org/swift-book/ReferenceManual/Declarations.html#ID550" target="_blank" rel="noreferrer">Swift 5.7</a>.</p><p>TL;DR: it supports making <em>any</em> identifier a custom operator with precedences specified by a partial ordering. Left and right associativities are supported in addition to that.</p><p>The precedence and associativity information is bound to a name, not a definition. This means we can import a name from another module with changes to its name, associativity, and precedence. Importing with renaming is an established feature, but changing associativity and precedence is not that popular (though implemented in Agda already).</p><p>Here are some code examples (implementations are omitted for simplicity):</p><pre class="Aya"><code><span class="Comment">// Left-associative</span>
<span class="Keyword">def</span> <span class="Keyword">infixl</span> <a id="Mian-2b" class="aya-hover" aya-hover-text="Nat" href="#Mian-2b"><span class="Fn">+</span></a> (<a id="v252277567" class="aya-hover" aya-hover-text="Nat" href="#v252277567"><span class="LocalVar">x</span></a> <a id="v238357312" class="aya-hover" aya-hover-text="Nat" href="#v238357312"><span class="LocalVar">y</span></a> : <a class="aya-hover" aya-hover-text="Type 0" href="#Mian-Nat"><span class="Data">Nat</span></a>) : <a class="aya-hover" aya-hover-text="Type 0" href="#Mian-Nat"><span class="Data">Nat</span></a> ⇒ <span class="aya-tooltip" data-tooltip-text="PHByZSBjbGFzcz0iQXlhIj4KPGNvZGU+R29hbDogR29hbCBvZiB0eXBlCiAgICAgICAgPGEgaHJlZj0iI01pYW4tTmF0Ij48c3BhbiBjbGFzcz0iRGF0YSI+TmF0PC9zcGFuPjwvYT4KICAgICAgICAoTm9ybWFsaXplZDogPGEgaHJlZj0iI01pYW4tTmF0Ij48c3BhbiBjbGFzcz0iRGF0YSI+TmF0PC9zcGFuPjwvYT4pCiAgICAgIENvbnRleHQ6CiAgICAgICAgPGEgaHJlZj0iI3YyNTIyNzc1NjciPjxzcGFuIGNsYXNzPSJMb2NhbFZhciI+eDwvc3Bhbj48L2E+IDogPGEgaHJlZj0iI01pYW4tTmF0Ij48c3BhbiBjbGFzcz0iRGF0YSI+TmF0PC9zcGFuPjwvYT4KICAgICAgICA8YSBocmVmPSIjdjIzODM1NzMxMiI+PHNwYW4gY2xhc3M9IkxvY2FsVmFyIj55PC9zcGFuPjwvYT4gOiA8YSBocmVmPSIjTWlhbi1OYXQiPjxzcGFuIGNsYXNzPSJEYXRhIj5OYXQ8L3NwYW4+PC9hPjwvY29kZT4KPC9wcmU+Cg=="><span class="Goal"><span class="aya-tooltip" data-tooltip-text="PHByZSBjbGFzcz0iQXlhIj4KPGNvZGU+PHNwYW4gY2xhc3M9IkNhbGwiPj88YSBocmVmPSIjdjI1OTU2NDY3MCI+XzU8L2E+IDxhIGhyZWY9IiN2MjUyMjc3NTY3Ij48c3BhbiBjbGFzcz0iTG9jYWxWYXIiPng8L3NwYW4+PC9hPiA8YSBocmVmPSIjdjIzODM1NzMxMiI+PHNwYW4gY2xhc3M9IkxvY2FsVmFyIj55PC9zcGFuPjwvYT48L3NwYW4+PC9jb2RlPgo8L3ByZT4K">{??}</span></span></span>
<span class="Comment">// Left-associative, bind tighter than +</span>
<span class="Keyword">def</span> <span class="Keyword">infixl</span> <a id="Mian-×" class="aya-hover" aya-hover-text="Nat" href="#Mian-×"><span class="Fn">×</span></a> (<a id="v1855026648" class="aya-hover" aya-hover-text="Nat" href="#v1855026648"><span class="LocalVar">x</span></a> <a id="v2097905212" class="aya-hover" aya-hover-text="Nat" href="#v2097905212"><span class="LocalVar">y</span></a> : <a class="aya-hover" aya-hover-text="Type 0" href="#Mian-Nat"><span class="Data">Nat</span></a>) : <a class="aya-hover" aya-hover-text="Type 0" href="#Mian-Nat"><span class="Data">Nat</span></a> ⇒ <span class="aya-tooltip" data-tooltip-text="PHByZSBjbGFzcz0iQXlhIj4KPGNvZGU+R29hbDogR29hbCBvZiB0eXBlCiAgICAgICAgPGEgaHJlZj0iI01pYW4tTmF0Ij48c3BhbiBjbGFzcz0iRGF0YSI+TmF0PC9zcGFuPjwvYT4KICAgICAgICAoTm9ybWFsaXplZDogPGEgaHJlZj0iI01pYW4tTmF0Ij48c3BhbiBjbGFzcz0iRGF0YSI+TmF0PC9zcGFuPjwvYT4pCiAgICAgIENvbnRleHQ6CiAgICAgICAgPGEgaHJlZj0iI3YxODU1MDI2NjQ4Ij48c3BhbiBjbGFzcz0iTG9jYWxWYXIiPng8L3NwYW4+PC9hPiA6IDxhIGhyZWY9IiNNaWFuLU5hdCI+PHNwYW4gY2xhc3M9IkRhdGEiPk5hdDwvc3Bhbj48L2E+CiAgICAgICAgPGEgaHJlZj0iI3YyMDk3OTA1MjEyIj48c3BhbiBjbGFzcz0iTG9jYWxWYXIiPnk8L3NwYW4+PC9hPiA6IDxhIGhyZWY9IiNNaWFuLU5hdCI+PHNwYW4gY2xhc3M9IkRhdGEiPk5hdDwvc3Bhbj48L2E+PC9jb2RlPgo8L3ByZT4K"><span class="Goal"><span class="aya-tooltip" data-tooltip-text="PHByZSBjbGFzcz0iQXlhIj4KPGNvZGU+PHNwYW4gY2xhc3M9IkNhbGwiPj88YSBocmVmPSIjdjM2NDU5NzMwMCI+Xzg8L2E+IDxhIGhyZWY9IiN2MTg1NTAyNjY0OCI+PHNwYW4gY2xhc3M9IkxvY2FsVmFyIj54PC9zcGFuPjwvYT4gPGEgaHJlZj0iI3YyMDk3OTA1MjEyIj48c3BhbiBjbGFzcz0iTG9jYWxWYXIiPnk8L3NwYW4+PC9hPjwvc3Bhbj48L2NvZGU+CjwvcHJlPgo=">{??}</span></span></span> <span class="Keyword">tighter</span> <a class="aya-hover" aya-hover-text="Nat" href="#Mian-2b"><span class="Fn">+</span></a>
<span class="Comment">// Prefix operator</span>
<span class="Keyword">def</span> <span class="Keyword">fixl</span> <a id="Mian-21" class="aya-hover" aya-hover-text="Nat" href="#Mian-21"><span class="Fn">!</span></a> (<a id="v1265900909" class="aya-hover" aya-hover-text="Nat" href="#v1265900909"><span class="LocalVar">x</span></a> : <a class="aya-hover" aya-hover-text="Type 0" href="#Mian-Nat"><span class="Data">Nat</span></a>) : <a class="aya-hover" aya-hover-text="Type 0" href="#Mian-Nat"><span class="Data">Nat</span></a> ⇒ <span class="aya-tooltip" data-tooltip-text="PHByZSBjbGFzcz0iQXlhIj4KPGNvZGU+R29hbDogR29hbCBvZiB0eXBlCiAgICAgICAgPGEgaHJlZj0iI01pYW4tTmF0Ij48c3BhbiBjbGFzcz0iRGF0YSI+TmF0PC9zcGFuPjwvYT4KICAgICAgICAoTm9ybWFsaXplZDogPGEgaHJlZj0iI01pYW4tTmF0Ij48c3BhbiBjbGFzcz0iRGF0YSI+TmF0PC9zcGFuPjwvYT4pCiAgICAgIENvbnRleHQ6CiAgICAgICAgPGEgaHJlZj0iI3YxMjY1OTAwOTA5Ij48c3BhbiBjbGFzcz0iTG9jYWxWYXIiPng8L3NwYW4+PC9hPiA6IDxhIGhyZWY9IiNNaWFuLU5hdCI+PHNwYW4gY2xhc3M9IkRhdGEiPk5hdDwvc3Bhbj48L2E+PC9jb2RlPgo8L3ByZT4K"><span class="Goal"><span class="aya-tooltip" data-tooltip-text="PHByZSBjbGFzcz0iQXlhIj4KPGNvZGU+PHNwYW4gY2xhc3M9IkNhbGwiPj88YSBocmVmPSIjdjc4MzE5MTY2MiI+Xzc8L2E+IDxhIGhyZWY9IiN2MTI2NTkwMDkwOSI+PHNwYW4gY2xhc3M9IkxvY2FsVmFyIj54PC9zcGFuPjwvYT48L3NwYW4+PC9jb2RlPgo8L3ByZT4K">{??}</span></span></span>
<span class="Comment">// Postfix operator</span>
<span class="Keyword">def</span> <span class="Keyword">fixr</span> <a id="Mian-3f" class="aya-hover" aya-hover-text="Nat" href="#Mian-3f"><span class="Fn">?</span></a> (<a id="v150138649" class="aya-hover" aya-hover-text="Nat" href="#v150138649"><span class="LocalVar">x</span></a> : <a class="aya-hover" aya-hover-text="Type 0" href="#Mian-Nat"><span class="Data">Nat</span></a>) : <a class="aya-hover" aya-hover-text="Type 0" href="#Mian-Nat"><span class="Data">Nat</span></a> ⇒ <span class="aya-tooltip" data-tooltip-text="PHByZSBjbGFzcz0iQXlhIj4KPGNvZGU+R29hbDogR29hbCBvZiB0eXBlCiAgICAgICAgPGEgaHJlZj0iI01pYW4tTmF0Ij48c3BhbiBjbGFzcz0iRGF0YSI+TmF0PC9zcGFuPjwvYT4KICAgICAgICAoTm9ybWFsaXplZDogPGEgaHJlZj0iI01pYW4tTmF0Ij48c3BhbiBjbGFzcz0iRGF0YSI+TmF0PC9zcGFuPjwvYT4pCiAgICAgIENvbnRleHQ6CiAgICAgICAgPGEgaHJlZj0iI3YxNTAxMzg2NDkiPjxzcGFuIGNsYXNzPSJMb2NhbFZhciI+eDwvc3Bhbj48L2E+IDogPGEgaHJlZj0iI01pYW4tTmF0Ij48c3BhbiBjbGFzcz0iRGF0YSI+TmF0PC9zcGFuPjwvYT48L2NvZGU+CjwvcHJlPgo="><span class="Goal"><span class="aya-tooltip" data-tooltip-text="PHByZSBjbGFzcz0iQXlhIj4KPGNvZGU+PHNwYW4gY2xhc3M9IkNhbGwiPj88YSBocmVmPSIjdjExOTE2NTQ1OTUiPl8zPC9hPiA8YSBocmVmPSIjdjE1MDEzODY0OSI+PHNwYW4gY2xhc3M9IkxvY2FsVmFyIj54PC9zcGFuPjwvYT48L3NwYW4+PC9jb2RlPgo8L3ByZT4K">{??}</span></span></span></code>
</pre><p>The <code>tighter</code> keyword works like this: when there are expressions like <code>a × b + c</code> which may either mean <code>(a × b) + c</code> or <code>a × (b + c)</code>, we will put the tighter operator in the parenthesis. In case we found the two operators share the same priority, Aya will report an error.</p><p>When importing operators from other modules, we can locally specify additional associativity and precedence information:</p><pre class="Aya"><code><span class="Keyword">open</span> <span class="Keyword">import</span> Primitives <span class="Keyword">using</span> (
  invol       <span class="Keyword">as</span> <span class="Keyword">fixl</span>  ~  <span class="Keyword">tighter</span> =, \/, /\,
  intervalMin <span class="Keyword">as</span> <span class="Keyword">infix</span> /\ <span class="Keyword">tighter</span> \/,
  intervalMax <span class="Keyword">as</span> <span class="Keyword">infix</span> \/,
)</code>
</pre><p>This should allow fine-grained control over the precedence and associativity of operators. In case there is a cycle in the graph of operator precedence, Aya will report an error.</p><p>Specifying precedence of operators with a partial ordering is way better than with a number. In Haskell, if we already have <code>infix 3 +</code> and <code>infix 4 ×</code>, and we hope to add a new operator which has higher precedence than <code>+</code> but lower than <code>×</code>, it&#39;s going to be impossible. Agda introduced <a href="https://github.com/agda/agda/issues/3991" target="_blank" rel="noreferrer">float-point precedence</a> levels to address the issue, but I think it does not solve the essential problem: that I have to lookup the numbers (of existing operator precedences) every time I write a new operator.</p><p>In the future, we plan to support mixfix operators as in Agda (the current framework can support mixfix easily, but abusing mixfix notations can harm readability).</p></div></div></main><footer class="VPDocFooter" data-v-f904a75d data-v-44ba7a43><!--[--><!--]--><div class="edit-info" data-v-44ba7a43><div class="edit-link" data-v-44ba7a43><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/aya-prover/aya-prover-docs/tree/main/src/blog/binops.md" target="_blank" rel="noreferrer" data-v-44ba7a43><!--[--><span class="vpi-square-pen edit-link-icon" data-v-44ba7a43></span> Suggest changes to this page<!--]--></a></div><div class="last-updated" data-v-44ba7a43><p class="VPLastUpdated" data-v-44ba7a43 data-v-9123fd4e>Last updated: <time datetime="2024-12-15T23:12:37.000Z" data-v-9123fd4e></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-44ba7a43><span class="visually-hidden" id="doc-footer-aria-label" data-v-44ba7a43>Pager</span><div class="pager" data-v-44ba7a43><a class="VPLink link pager-link prev" href="/blog/path-elab.html" data-v-44ba7a43><!--[--><span class="desc" data-v-44ba7a43>Previous page</span><span class="title" data-v-44ba7a43>Path type elaboration</span><!--]--></a></div><div class="pager" data-v-44ba7a43><a class="VPLink link pager-link next" href="/blog/index-unification.html" data-v-44ba7a43><!--[--><span class="desc" data-v-44ba7a43>Next page</span><span class="title" data-v-44ba7a43>Index unification</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"blog_binops.md\":\"B-64ecLm\",\"blog_bye-hott.md\":\"Cp1sTWEd\",\"blog_class-defeq.md\":\"Bv6R6WA4\",\"blog_extended-pruning.md\":\"DGL9dNw9\",\"blog_ind-prop.md\":\"BBPt9b6w\",\"blog_index-unification.md\":\"CCWWlNRa\",\"blog_index.md\":\"D-bi3G-6\",\"blog_jit-compile.md\":\"C4HT5U4E\",\"blog_lang-exts.md\":\"C4B5Uj_-\",\"blog_path-elab.md\":\"DuF6Cr48\",\"blog_pathcon-elab.md\":\"JPB6WmI6\",\"blog_redirect.md\":\"DvLlcC7i\",\"blog_tt-in-tt-qiit.md\":\"Bf6d3Cju\",\"guide_fake-literate.md\":\"DMyxLxBs\",\"guide_haskeller-tutorial.md\":\"DmRqyxph\",\"guide_index.md\":\"Dmx_xq94\",\"guide_install.md\":\"DCFhT_8S\",\"guide_project-tutorial.md\":\"CWiygfSO\",\"guide_prover-tutorial.md\":\"BZ0FFQ3P\",\"guide_readings.md\":\"B1j0C01T\",\"guide_vscode-tutorial.md\":\"UHnlVvPv\",\"index.md\":\"CYS2N3nv\",\"pubs_index.md\":\"Bs5-jOQq\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Aya Prover\",\"description\":\"Website for the Aya theorem prover\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/logo.svg\",\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/aya-prover\"}],\"editLink\":{\"pattern\":\"https://github.com/aya-prover/aya-prover-docs/tree/main/src/:path\",\"text\":\"Suggest changes to this page\"},\"nav\":[{\"text\":\"Guide\",\"link\":\"/guide/\"},{\"text\":\"Publications\",\"link\":\"/pubs/\"},{\"text\":\"Blog\",\"link\":\"/blog/\"}],\"search\":{\"provider\":\"local\"},\"sidebar\":[{\"text\":\"Blog\",\"items\":[{\"text\":\"JVM JIT HOAS compiler\",\"link\":\"/blog/jit-compile\"},{\"text\":\"TT in TT using QIIT\",\"link\":\"/blog/tt-in-tt-qiit\"},{\"text\":\"Extended Pruning\",\"link\":\"/blog/extended-pruning\"},{\"text\":\"Farewell, Univalence\",\"link\":\"/blog/bye-hott\"},{\"text\":\"Impredicative Props\",\"link\":\"/blog/ind-prop\"},{\"text\":\"Def. projection in classes\",\"link\":\"/blog/class-defeq\"},{\"text\":\"Path cons. elaboration\",\"link\":\"/blog/pathcon-elab\"},{\"text\":\"Path type elaboration\",\"link\":\"/blog/path-elab\"},{\"text\":\"Binary operators\",\"link\":\"/blog/binops\"},{\"text\":\"Index unification\",\"link\":\"/blog/index-unification\"},{\"text\":\"Language extensions?\",\"link\":\"/blog/lang-exts\"}]},{\"text\":\"Guide\",\"items\":[{\"text\":\"Get Started\",\"link\":\"/guide/\"},{\"text\":\"Install\",\"link\":\"/guide/install\"},{\"text\":\"Functional Programming\",\"link\":\"/guide/haskeller-tutorial\"},{\"text\":\"Theorem Proving\",\"link\":\"/guide/prover-tutorial\"},{\"text\":\"Aya packages\",\"link\":\"/guide/project-tutorial\"},{\"text\":\"VSCode\",\"link\":\"/guide/vscode-tutorial\"},{\"text\":\"Related papers\",\"link\":\"/guide/readings\"},{\"text\":\"Fake literate mode\",\"link\":\"/guide/fake-literate\"}]}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>